(function(A){A.widget("ui.progressbar",{init:function(){A.extend(this.options,{_interval:this.options.interval});var B=this,C=this.options,E=(new Date()).getTime()+Math.random(),D=C.text||"0%";this.element.addClass("ui-progressbar").width(C.width);A.extend(this,{active:false,pixelState:0,percentState:0,identifier:E,bar:A('<div class="ui-progressbar-bar ui-hidden"></div>').css({width:"0px",overflow:"hidden",zIndex:100}),textElement:A('<div class="ui-progressbar-text"></div>').html(D).css({width:"0px",overflow:"hidden"}),textBg:A('<div class="ui-progressbar-text ui-progressbar-text-back"></div>').html(D).css({width:this.element.width()}),wrapper:A('<div class="ui-progressbar-wrap"></div>')});this.wrapper.append(this.bar.append(this.textElement.addClass(C.textClass)),this.textBg).appendTo(this.element);jQuery.easing[this.identifier]=function(M,N,L,K,J){var I=C.increment,G=C.width,H=((I>G?G:I)/G),F=Math.round(M/H)*H;return F>1?1:F}},plugins:{},ui:function(B){return{instance:this,identifier:this.identifier,options:this.options,element:this.bar,textElement:this.textElement,pixelState:this.pixelState,percentState:this.percentState}},propagate:function(C,B){A.ui.plugin.call(this,C,[B,this.ui()]);this.element.triggerHandler(C=="progressbar"?C:["progressbar",C].join(""),[B,this.ui()],this.options[C])},destroy:function(){this.stop();this.element.removeClass("ui-progressbar ui-progressbar-disabled").removeData("progressbar").unbind(".progressbar").find(".ui-progressbar-wrap").remove();delete jQuery.easing[this.identifier]},enable:function(){this.element.removeClass("ui-progressbar-disabled");this.disabled=false},disable:function(){this.element.addClass("ui-progressbar-disabled");this.disabled=true},start:function(){var B=this,C=this.options;if(this.disabled){return }B.active=true;setTimeout(function(){B.active=false},C.duration);this.animate();this.propagate("start",this.ui());return false},animate:function(){var C=this,D=this.options,B=D.interval;this.bar.animate({width:D.width},{duration:B,easing:this.identifier,step:function(G,E){C.progress((G/D.width)*100);var F=((new Date().getTime())-E.startTime);D.interval=B-F},complete:function(){delete jQuery.easing[C.identifier];C.pause();if(C.active){C.stop();C.animate()}}})},pause:function(){if(this.disabled){return }this.bar.stop();this.propagate("pause",this.ui())},stop:function(){this.bar.stop();this.bar.width(0);this.textElement.width(0);this.bar.addClass("ui-hidden");this.options.interval=this.options._interval;this.propagate("stop",this.ui())},progress:function(B){if(this.bar.is(".ui-hidden")){this.bar.removeClass("ui-hidden")}this.percentState=B>100?100:B;this.pixelState=(this.percentState/100)*this.options.width;this.bar.width(this.pixelState);this.textElement.width(this.pixelState);if(this.options.range&&!this.options.text){this.textElement.html(Math.round(this.percentState)+"%")}this.propagate("progress",this.ui())}});A.ui.progressbar.defaults={width:300,duration:3000,interval:200,increment:1,range:true,text:"",addClass:"",textClass:""}})(jQuery)